# User Flow Test Sequences - Hybrid zk-Compressed Architecture

## 🎯 테스트 목표
실제 사용자 시나리오에 따른 end-to-end 테스트를 통해 하이브리드 zk-compressed 아키텍처의 완전한 작동을 검증합니다.

---

## 📋 Test Sequence 1: 개인 사용자 온보딩 플로우

### **시나리오**: 새로운 사용자가 플랫폼에 가입하여 프로필을 완성하는 과정

**테스트 단계:**
1. **지갑 연결 및 초기 설정**
   - SOL 에어드롭 받기
   - USDC 토큰 계정 생성

2. **하이브리드 프로필 생성**
   - 공개 정보 입력 (스킬, 경력, 지역, 연락 가격 등)
   - 프로필 생성 트랜잭션 실행
   - 공개 데이터 Helius 인덱싱 가능성 확인

3. **개인정보 zk-압축**
   - 레쥬메 링크를 zk-compressed NFT로 저장
   - Merkle tree 생성 및 leaf index 확인
   - 개인정보 완전 탈중앙화 확인

4. **디지털 명함 NFT 생성**
   - 프로필 기반 NFT 민팅
   - 메타데이터 설정 및 저장

**검증 포인트:**
- ✅ 공개 데이터는 검색 가능하고 인덱싱됨
- ✅ 개인정보는 zk-압축으로 완전히 보호됨
- ✅ 플랫폼이 개인정보에 접근할 수 없음
- ✅ NFT 명함 정상 생성

---

## 📋 Test Sequence 2: Contact Gate 시스템 테스트

### **시나리오**: 리크루터가 인재에게 가치 기반 연락을 시도하는 과정

**테스트 단계:**
1. **인재 검색 및 발견**
   - 공개 프로필 데이터로 인재 검색
   - 스킬, 경력, 지역 필터링 테스트

2. **연락 요청 및 결제**
   - 연락 가격 확인
   - USDC escrow에 결제 예치
   - Contact request 생성

3. **응답 처리**
   - **시나리오 A**: 인재가 수락 → 리크루터 환불
   - **시나리오 B**: 인재가 거절 → 인재에게 지급
   - **시나리오 C**: 응답 없음 → 자동 만료 처리

4. **개인정보 접근 권한**
   - zk-압축된 레쥬메 접근 권한 획득
   - Merkle proof 검증을 통한 보안 접근

**검증 포인트:**
- ✅ Escrow 시스템 정상 작동
- ✅ 응답에 따른 자동 결제 처리
- ✅ zk-압축 데이터 보안 접근 제어

---

## 📋 Test Sequence 3: 채용 바운티 시스템 테스트

### **시나리오**: 기업이 채용 공고를 올리고 성공 시 보상이 분배되는 과정

**테스트 단계:**
1. **채용 공고 생성**
   - 기업이 채용 바운티 예치
   - 공고 상세 정보 등록
   - Reward pool 생성

2. **지원 프로세스**
   - **직접 지원**: 인재가 직접 지원
   - **추천 지원**: 추천인이 추천 링크 생성 후 인재 지원

3. **채용 성공 및 보상 분배**
   - 기업이 합격자 선정
   - 스마트 컨트랙트 자동 보상 분배
   - **직접 지원**: 합격자에게 전액 지급
   - **추천 지원**: 합격자와 추천인에게 분할 지급

**검증 포인트:**
- ✅ 바운티 escrow 시스템 정상 작동
- ✅ 추천 시스템 정확한 보상 분배
- ✅ 크로스 프로그램 호출(CPI) 정상 작동

---

## 📋 Test Sequence 4: Success Resume 마켓플레이스 테스트

### **시나리오**: 합격자가 성공 이력서를 익명화하여 판매하는 과정

**테스트 단계:**
1. **합격 이력서 등록**
   - 채용 성공한 합격자가 이력서 NFT 생성
   - 개인정보 익명화 처리
   - 판매 가격 설정

2. **이력서 검증**
   - 실제 합격 여부 검증
   - 이력서 신뢰성 확인
   - 검증 배지 부여

3. **이력서 구매 및 열람**
   - 다른 구직자가 이력서 구매
   - 익명화된 성공 사례 열람
   - 로열티 분배 (원 작성자에게)

**검증 포인트:**
- ✅ NFT 기반 이력서 거래 시스템
- ✅ 익명화 및 개인정보 보호
- ✅ 검증 시스템 정상 작동
- ✅ 로열티 자동 분배

---

## 📋 Test Sequence 5: 종합 통합 테스트

### **시나리오**: 전체 플랫폼의 모든 기능이 연결되어 작동하는 end-to-end 테스트

**테스트 단계:**
1. **다중 사용자 설정**
   - 리크루터, 인재, 추천인, 구직자 등 4명의 사용자
   - 각각 프로필 생성 및 USDC 보유

2. **Full Cycle Test**
   - 리크루터가 인재 검색 → 연락 → 채용 공고 생성
   - 추천인이 추천 링크 생성 → 인재 지원
   - 채용 성공 → 보상 분배
   - 합격자가 성공 이력서 판매
   - 다른 구직자가 이력서 구매

3. **Cross-Program 상호작용**
   - 5개 프로그램 간 CPI 호출 테스트
   - 데이터 일관성 검증
   - 에러 핸들링 테스트

**검증 포인트:**
- ✅ 전체 시스템의 seamless 작동
- ✅ 모든 CPI 호출 정상 처리
- ✅ 복잡한 비즈니스 로직 정확성
- ✅ 에러 상황 적절한 처리

---

## 🔧 테스트 실행 권장 순서

1. **Sequence 1** → 기본 기능 검증
2. **Sequence 2** → 핵심 비즈니스 로직 검증
3. **Sequence 3** → 복잡한 보상 시스템 검증
4. **Sequence 4** → NFT 마켓플레이스 검증
5. **Sequence 5** → 전체 통합 검증

각 시퀀스는 독립적으로 실행 가능하지만, 순서대로 진행할 때 최적의 테스트 커버리지를 제공합니다.

---

## 📊 성능 및 비용 검증

각 테스트에서 확인할 지표:
- **트랜잭션 비용**: 각 instruction별 SOL 소모량
- **zk-압축 효율성**: 일반 NFT 대비 비용 절감률 (~100배)
- **응답 시간**: 각 트랜잭션 처리 시간
- **데이터 일관성**: 크로스 프로그램 데이터 동기화
- **보안**: 개인정보 접근 제어 정확성